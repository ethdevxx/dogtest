{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rohit/development/next-minimal-setup/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rohit/development/next-minimal-setup/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport Web3 from \"web3\";\nimport { useState, useEffect } from 'react';\nimport { ADDRESS, ABI } from \"../../config.js\";\nexport default function Mint() {\n  // FOR WALLET\n  var _useState = useState(false),\n      signedIn = _useState[0],\n      setSignedIn = _useState[1];\n\n  var _useState2 = useState(null),\n      walletAddress = _useState2[0],\n      setWalletAddress = _useState2[1]; // FOR MINTING\n\n\n  var _useState3 = useState(1),\n      how_many_bananas = _useState3[0],\n      set_how_many_bananas = _useState3[1];\n\n  var _useState4 = useState(null),\n      bananaContract = _useState4[0],\n      setBananaContract = _useState4[1]; // INFO FROM SMART Contract\n\n\n  var _useState5 = useState(0),\n      totalSupply = _useState5[0],\n      setTotalSupply = _useState5[1];\n\n  var _useState6 = useState(false),\n      saleStarted = _useState6[0],\n      setSaleStarted = _useState6[1];\n\n  var _useState7 = useState(0),\n      bananaPrice = _useState7[0],\n      setBananaPrice = _useState7[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            signIn();\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n\n  function signIn() {\n    return _signIn.apply(this, arguments);\n  } //\n\n\n  function _signIn() {\n    _signIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (typeof window.web3 !== 'undefined') {\n                // Use existing gateway\n                window.web3 = new Web3(window.ethereum);\n              } else {\n                alert(\"No Ethereum interface injected into browser. Read-only access\");\n              }\n\n              window.ethereum.enable().then(function (accounts) {\n                window.web3.eth.net.getNetworkType() // checks if connected network is mainnet (change this to rinkeby if you wanna test on testnet)\n                .then(function (network) {\n                  console.log(network);\n\n                  if (network != \"main\") {\n                    alert(\"You are on \" + network + \" network. Change network to mainnet or you won't be able to do anything here\");\n                  }\n                });\n                var wallet = accounts[0];\n                setWalletAddress(wallet);\n                setSignedIn(true);\n                callContractData(wallet);\n              })[\"catch\"](function (error) {\n                // Handle error. Likely the user rejected the login\n                console.error(error);\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _signIn.apply(this, arguments);\n  }\n\n  function signOut() {\n    return _signOut.apply(this, arguments);\n  }\n\n  function _signOut() {\n    _signOut = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setSignedIn(false);\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _signOut.apply(this, arguments);\n  }\n\n  function callContractData(_x) {\n    return _callContractData.apply(this, arguments);\n  }\n\n  function _callContractData() {\n    _callContractData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(wallet) {\n      var bananaContract, salebool, totalSupply, bananaPrice;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              // let balance = await web3.eth.getBalance(wallet);\n              // setWalletBalance(balance)\n              bananaContract = new window.web3.eth.Contract(ABI, ADDRESS);\n              setBananaContract(bananaContract);\n              _context4.next = 4;\n              return bananaContract.methods.saleIsActive().call();\n\n            case 4:\n              salebool = _context4.sent;\n              // console.log(\"saleisActive\" , salebool)\n              setSaleStarted(salebool);\n              _context4.next = 8;\n              return bananaContract.methods.totalSupply().call();\n\n            case 8:\n              totalSupply = _context4.sent;\n              setTotalSupply(totalSupply);\n              _context4.next = 12;\n              return bananaContract.methods.bananaPrice().call();\n\n            case 12:\n              bananaPrice = _context4.sent;\n              setBananaPrice(bananaPrice);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _callContractData.apply(this, arguments);\n  }\n\n  function mintBanana(_x2) {\n    return _mintBanana.apply(this, arguments);\n  }\n\n  function _mintBanana() {\n    _mintBanana = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(how_many_bananas) {\n      var price, gasAmount;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              if (!bananaContract) {\n                _context5.next = 10;\n                break;\n              }\n\n              price = Number(bananaPrice) * how_many_bananas;\n              _context5.next = 4;\n              return bananaContract.methods.mintBoringBanana(how_many_bananas).estimateGas({\n                from: walletAddress,\n                value: price\n              });\n\n            case 4:\n              gasAmount = _context5.sent;\n              console.log(\"estimated gas\", gasAmount);\n              console.log({\n                from: walletAddress,\n                value: price\n              });\n              bananaContract.methods.mintBoringBanana(how_many_bananas).send({\n                from: walletAddress,\n                value: price,\n                gas: String(gasAmount)\n              }).on('transactionHash', function (hash) {\n                console.log(\"transactionHash\", hash);\n              });\n              _context5.next = 11;\n              break;\n\n            case 10:\n              console.log(\"Wallet not connected\");\n\n            case 11:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _mintBanana.apply(this, arguments);\n  }\n\n  ;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    id: \"bodyy\",\n    className: \"flex flex-col items-center justify-center min-h-screen py-2\",\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Boring Bananas Company\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/images/favicon.jpg\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:title\",\n        content: \"Boring Bananas Co.\"\n      }, \"ogtitle\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:description\",\n        content: \"Here at Boring Bananas company, we specialise in the world's finest digital bananas. We've put together a team spanning 3 continents, to bring you some of the most \\u200DNUTRITIOUS and DELICIOUS\\nbananas out known to man.\"\n      }, \"ogdesc\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:type\",\n        content: \"website\"\n      }, \"ogtype\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:url\",\n        content: \"https://boringbananas.co/\"\n      }, \"ogurl\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:image\",\n        content: \"https://boringbananas.co/images/Hola.gif\"\n      }, \"ogimage\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:site_name\",\n        content: \"https://boringbananas.co/\"\n      }, \"ogsitename\"), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"twitter:card\",\n        content: \"summary_large_image\"\n      }, \"twcard\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"twitter:domain\",\n        content: \"boringbananas.co\"\n      }, \"twdomain\"), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"twitter:url\",\n        content: \"https://boringbananas.co/\"\n      }, \"twurl\"), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"twitter:title\",\n        content: \"Boring Bananas Co.\"\n      }, \"twtitle\"), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"twitter:description\",\n        content: \"Here at boring Bananas company, we specialise in the world's finest digital bananas. We've put together a team spanning 3 continents, to bring you some of the most \\u200DNUTRITIOUS and DELICIOUS\\nbananas out known to man.\"\n      }, \"twdesc\"), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"twitter:image\",\n        content: \"https://boringbananas.co/images/Hola.gif\"\n      }, \"twimage\")]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex items-center justify-between w-full border-b-2\\tpb-6\",\n        children: [/*#__PURE__*/_jsx(\"a\", {\n          href: \"/\",\n          className: \"\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"images/Hola.gif\",\n            width: \"108\",\n            alt: \"\",\n            className: \"logo-image\"\n          })\n        }), /*#__PURE__*/_jsxs(\"nav\", {\n          className: \"flex flex-wrap flex-row justify-around Poppitandfinchsans\",\n          children: [/*#__PURE__*/_jsx(\"a\", {\n            href: \"/#about\",\n            className: \"text-4xl text-white hover:text-black m-6\",\n            children: \"About\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"/mint\",\n            className: \"text-4xl text-white hover:text-black m-6\",\n            children: \"Mint!\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"/#traits\",\n            className: \"text-4xl text-white hover:text-black m-6\",\n            children: \"Banana traits\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"/#roadmap\",\n            className: \"text-4xl text-white hover:text-black m-6\",\n            children: \"Roadmap\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"/#team\",\n            className: \"text-4xl text-white hover:text-black m-6\",\n            children: \"Team\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"/#contact\",\n            className: \"text-4xl text-white hover:text-black m-6\",\n            children: \"Contact\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"https://twitter.com/boringbananasco\",\n            className: \"text-4xl  hover:text-white m-6 text-blau\",\n            children: \"TWITTER\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            href: \"https://discord.gg/8Wk9Hp6UyV\",\n            className: \"text-4xl  hover:text-white m-6 text-blau\",\n            children: \"DISCORD\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex auth my-8 font-bold  justify-center items-center vw2\",\n        children: !signedIn ? /*#__PURE__*/_jsx(\"button\", {\n          onClick: signIn,\n          className: \"montserrat inline-block border-2 border-black bg-white border-opacity-100 no-underline hover:text-black py-2 px-4 mx-4 shadow-lg hover:bg-blue-500 hover:text-gray-100\",\n          children: \"Connect Wallet with Metamask\"\n        }) : /*#__PURE__*/_jsxs(\"button\", {\n          onClick: signOut,\n          className: \"montserrat inline-block border-2 border-black bg-white border-opacity-100 no-underline hover:text-black py-2 px-4 mx-4 shadow-lg hover:bg-blue-500 hover:text-gray-100\",\n          children: [\"Wallet Connected: \", walletAddress]\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"md:w-2/3 w-4/5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"mt-6 border-b-2 py-6\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col items-center\",\n          children: [/*#__PURE__*/_jsxs(\"span\", {\n            className: \"flex Poppitandfinchsans text-5xl text-white items-center bg-grey-lighter rounded rounded-r-none my-4 \",\n            children: [\"TOTAL BANANAS MINTED:  \", /*#__PURE__*/_jsxs(\"span\", {\n              className: \"text-blau text-6xl\",\n              children: [\" \", !signedIn ? /*#__PURE__*/_jsx(_Fragment, {\n                children: \"-\"\n              }) : /*#__PURE__*/_jsx(_Fragment, {\n                children: totalSupply\n              }), \" / 8888\"]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            id: \"mint\",\n            className: \"flex justify-around  mt-8 mx-6\",\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              className: \"flex Poppitandfinchsans text-5xl text-white items-center bg-grey-lighter rounded rounded-r-none px-3 font-bold\",\n              children: \"GIMME\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"number\",\n              min: \"1\",\n              max: \"20\",\n              value: how_many_bananas,\n              onChange: function onChange(e) {\n                return set_how_many_bananas(e.target.value);\n              },\n              name: \"\",\n              className: \"Poppitandfinchsans pl-4 text-4xl  inline bg-grey-lighter  py-2 font-normal rounded text-grey-darkest  font-bold\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"flex Poppitandfinchsans text-5xl text-white items-center bg-grey-lighter rounded rounded-r-none px-3 font-bold\",\n              children: \"BANANAS!\"\n            })]\n          }), saleStarted ? /*#__PURE__*/_jsxs(\"button\", {\n            onClick: function onClick() {\n              return mintBanana(how_many_bananas);\n            },\n            className: \"mt-4 Poppitandfinchsans text-4xl border-6 bg-blau  text-white hover:text-black p-2 \",\n            children: [\"MINT \", how_many_bananas, \" bananas for \", bananaPrice * how_many_bananas / Math.pow(10, 18), \" ETH + GAS\"]\n          }) : /*#__PURE__*/_jsx(\"button\", {\n            className: \"mt-4 Poppitandfinchsans text-4xl border-6 bg-blau  text-white hover:text-black p-2 \",\n            children: \"SALE IS NOT ACTIVE OR NO WALLET IS CONNECTED\"\n          })]\n        })\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}